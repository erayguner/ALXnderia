# =============================================================================
# Claude Flow V3 - Codex Configuration
# =============================================================================
# Generated by: @claude-flow/codex
# Documentation: https://github.com/ruvnet/claude-flow
# 
# This file configures the Codex CLI for Claude Flow integration.
# Place in .agents/config.toml (project) or .codex/config.toml (user).
# =============================================================================

# =============================================================================
# Core Settings
# =============================================================================

# Model selection - the AI model to use for code generation
# Options: gpt-5.3-codex, gpt-4o, claude-sonnet, claude-opus
model = "gpt-5.3-codex"

# Approval policy determines when human approval is required
# - untrusted: Always require approval
# - on-failure: Require approval only after failures
# - on-request: Require approval for significant changes
# - never: Auto-approve all actions (use with caution)
approval_policy = "on-request"

# Sandbox mode controls file system access
# - read-only: Can only read files, no modifications
# - workspace-write: Can write within workspace directory
# - danger-full-access: Full file system access (dangerous)
sandbox_mode = "workspace-write"

# Web search enables internet access for research
# - disabled: No web access
# - cached: Use cached results when available
# - live: Always fetch fresh results
web_search = "cached"

# =============================================================================
# Project Documentation
# =============================================================================

# Maximum bytes to read from AGENTS.md files
project_doc_max_bytes = 65536

# Fallback filenames if AGENTS.md not found
project_doc_fallback_filenames = [
  "AGENTS.md",
  "TEAM_GUIDE.md",
  ".agents.md"
]

# =============================================================================
# Features
# =============================================================================

[features]
# Enable child AGENTS.md guidance
child_agents_md = true

# Cache shell environment for faster repeated commands
shell_snapshot = true

# Smart approvals based on request context
request_rule = true

# Enable remote compaction for large histories
remote_compaction = true

# =============================================================================
# MCP Servers
# =============================================================================

[mcp_servers.claude-flow]
command = "npx"
args = ["-y", "@claude-flow/cli@latest"]
enabled = true
tool_timeout_sec = 120

# =============================================================================
# Skills Configuration
# =============================================================================

[[skills.config]]
path = ".agents/skills/swarm-orchestration"
enabled = true

[[skills.config]]
path = ".agents/skills/memory-management"
enabled = true

[[skills.config]]
path = ".agents/skills/sparc-methodology"
enabled = true

[[skills.config]]
path = ".agents/skills/security-audit"
enabled = true

[[skills.config]]
path = ".agents/skills/performance-analysis"
enabled = true

[[skills.config]]
path = ".agents/skills/github-automation"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-coordination"
enabled = true

[[skills.config]]
path = ".agents/skills/agentdb-advanced"
enabled = true

[[skills.config]]
path = ".agents/skills/agentdb-learning"
enabled = true

[[skills.config]]
path = ".agents/skills/agentdb-memory-patterns"
enabled = true

[[skills.config]]
path = ".agents/skills/agentdb-optimization"
enabled = true

[[skills.config]]
path = ".agents/skills/agentdb-vector-search"
enabled = true

[[skills.config]]
path = ".agents/skills/agentic-jujutsu"
enabled = true

[[skills.config]]
path = ".agents/skills/claims"
enabled = true

[[skills.config]]
path = ".agents/skills/embeddings"
enabled = true

[[skills.config]]
path = ".agents/skills/flow-nexus-neural"
enabled = true

[[skills.config]]
path = ".agents/skills/flow-nexus-platform"
enabled = true

[[skills.config]]
path = ".agents/skills/flow-nexus-swarm"
enabled = true

[[skills.config]]
path = ".agents/skills/github-code-review"
enabled = true

[[skills.config]]
path = ".agents/skills/github-multi-repo"
enabled = true

[[skills.config]]
path = ".agents/skills/github-project-management"
enabled = true

[[skills.config]]
path = ".agents/skills/github-release-management"
enabled = true

[[skills.config]]
path = ".agents/skills/github-workflow-automation"
enabled = true

[[skills.config]]
path = ".agents/skills/hive-mind"
enabled = true

[[skills.config]]
path = ".agents/skills/hive-mind-advanced"
enabled = true

[[skills.config]]
path = ".agents/skills/hooks-automation"
enabled = true

[[skills.config]]
path = ".agents/skills/neural-training"
enabled = true

[[skills.config]]
path = ".agents/skills/pair-programming"
enabled = true

[[skills.config]]
path = ".agents/skills/reasoningbank-agentdb"
enabled = true

[[skills.config]]
path = ".agents/skills/reasoningbank-intelligence"
enabled = true

[[skills.config]]
path = ".agents/skills/skill-builder"
enabled = true

[[skills.config]]
path = ".agents/skills/stream-chain"
enabled = true

[[skills.config]]
path = ".agents/skills/swarm-advanced"
enabled = true

[[skills.config]]
path = ".agents/skills/v3-cli-modernization"
enabled = true

[[skills.config]]
path = ".agents/skills/v3-core-implementation"
enabled = true

[[skills.config]]
path = ".agents/skills/v3-ddd-architecture"
enabled = true

[[skills.config]]
path = ".agents/skills/v3-integration-deep"
enabled = true

[[skills.config]]
path = ".agents/skills/v3-mcp-optimization"
enabled = true

[[skills.config]]
path = ".agents/skills/v3-memory-unification"
enabled = true

[[skills.config]]
path = ".agents/skills/v3-performance-optimization"
enabled = true

[[skills.config]]
path = ".agents/skills/v3-security-overhaul"
enabled = true

[[skills.config]]
path = ".agents/skills/v3-swarm-coordination"
enabled = true

[[skills.config]]
path = ".agents/skills/verification-quality"
enabled = true

[[skills.config]]
path = ".agents/skills/worker-benchmarks"
enabled = true

[[skills.config]]
path = ".agents/skills/worker-integration"
enabled = true

[[skills.config]]
path = ".agents/skills/workflow-automation"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-payments"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-challenges"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-sandbox"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-app-store"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-user-tools"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-neural-network"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-swarm"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-workflow"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-authentication"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-docs-api-openapi"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-spec-mobile-react-native"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-v3-security-architect"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-v3-memory-specialist"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-v3-queen-coordinator"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-v3-integration-architect"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-v3-performance-engineer"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-coordinator-swarm-init"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-memory-coordinator"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-automation-smart-agent"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-github-pr-manager"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-implementer-sparc-coder"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-sparc-coordinator"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-migration-plan"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-performance-analyzer"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-orchestrator-task"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-arch-system-design"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-crdt-synchronizer"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-quorum-manager"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-performance-benchmarker"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-security-manager"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-raft-manager"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-gossip-coordinator"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-byzantine-coordinator"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-test-long-runner"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-queen-coordinator"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-swarm-memory-manager"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-worker-specialist"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-collective-intelligence-coordinator"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-scout-explorer"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-code-analyzer"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-analyze-code-quality"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-dev-backend-api"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-base-template-generator"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-agentic-payments"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-pseudocode"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-refinement"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-specification"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-architecture"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-pagerank-analyzer"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-consensus-coordinator"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-trading-predictor"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-performance-optimizer"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-matrix-optimizer"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-code-goal-planner"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-goal-planner"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-sublinear-goal-planner"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-sona-learning-optimizer"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-ml-developer"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-tester"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-coder"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-reviewer"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-researcher"
enabled = true

[[skills.config]]
path = ".agents/skills/agent-planner"
enabled = true

# =============================================================================
# Profiles
# =============================================================================

# Development profile - more permissive for local work
[profiles.dev]
approval_policy = "never"
sandbox_mode = "danger-full-access"
web_search = "live"

# Safe profile - maximum restrictions
[profiles.safe]
approval_policy = "untrusted"
sandbox_mode = "read-only"
web_search = "disabled"

# CI profile - for automated pipelines
[profiles.ci]
approval_policy = "never"
sandbox_mode = "workspace-write"
web_search = "cached"

# =============================================================================
# History
# =============================================================================

[history]
# Save all session transcripts
persistence = "save-all"

# =============================================================================
# Shell Environment
# =============================================================================

[shell_environment_policy]
# Inherit environment variables
inherit = "core"

# Exclude sensitive variables
exclude = ["*_KEY", "*_SECRET", "*_TOKEN", "*_PASSWORD"]

# =============================================================================
# Sandbox Workspace Write Settings
# =============================================================================

[sandbox_workspace_write]
# Additional writable paths beyond workspace
writable_roots = []

# Allow network access
network_access = true

# Exclude temp directories
exclude_slash_tmp = false

# =============================================================================
# Security Settings
# =============================================================================

[security]
# Enable input validation for all user inputs
input_validation = true

# Prevent directory traversal attacks
path_traversal_prevention = true

# Scan for hardcoded secrets
secret_scanning = true

# Scan dependencies for known CVEs
cve_scanning = true

# Maximum file size for operations (bytes)
max_file_size = 10485760

# Allowed file extensions (empty = allow all)
allowed_extensions = []

# Blocked file patterns (regex)
blocked_patterns = ["\\.env$", "credentials\\.json$", "\\.pem$", "\\.key$"]

# =============================================================================
# Performance Settings
# =============================================================================

[performance]
# Maximum concurrent agents
max_agents = 8

# Task timeout in seconds
task_timeout = 300

# Memory limit per agent
memory_limit = "512MB"

# Enable response caching
cache_enabled = true

# Cache TTL in seconds
cache_ttl = 3600

# Enable parallel task execution
parallel_execution = true

# =============================================================================
# Logging Settings
# =============================================================================

[logging]
# Log level: debug, info, warn, error
level = "info"

# Log format: json, text, pretty
format = "pretty"

# Log destination: stdout, file, both
destination = "stdout"

# =============================================================================
# Neural Intelligence Settings
# =============================================================================

[neural]
# Enable SONA (Self-Optimizing Neural Architecture)
sona_enabled = true

# Enable HNSW vector search
hnsw_enabled = true

# HNSW index parameters
hnsw_m = 16
hnsw_ef_construction = 200
hnsw_ef_search = 100

# Enable pattern learning
pattern_learning = true

# Learning rate for neural adaptation
learning_rate = 0.01

# =============================================================================
# Swarm Orchestration Settings
# =============================================================================

[swarm]
# Default topology: hierarchical, mesh, ring, star
default_topology = "hierarchical"

# Default strategy: balanced, specialized, adaptive
default_strategy = "specialized"

# Consensus algorithm: raft, byzantine, gossip
consensus = "raft"

# Enable anti-drift measures
anti_drift = true

# Checkpoint interval (tasks)
checkpoint_interval = 10

# =============================================================================
# Hooks Configuration
# =============================================================================

[hooks]
# Enable lifecycle hooks
enabled = true

# Pre-task hook
pre_task = true

# Post-task hook (for learning)
post_task = true

# Enable neural training on post-edit
train_on_edit = true

# =============================================================================
# Background Workers
# =============================================================================

[workers]
# Enable background workers
enabled = true

# Worker configuration
[workers.audit]
enabled = true
priority = "critical"
interval = 300

[workers.optimize]
enabled = true
priority = "high"
interval = 600

[workers.consolidate]
enabled = true
priority = "low"
interval = 1800
